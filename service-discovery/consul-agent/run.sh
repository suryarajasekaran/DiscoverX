#!/bin/bash

docker run -d --name="consul-agent" --net=host -p 8500:8500 -p 8600:8600 -p 8300-8302:8300-8302 -e CONSUL_BIND_INTERFACE=eth0 -e 'CONSUL_LOCAL_CONFIG={"leave_on_terminate": true, "services": [{"name": "HTTP", "address": "127.0.0.1", "port": 80}], "checks": [{ "id": "api", "name": "HTTP API on port 5000", "http": "https://localhost:5000/health", "tls_skip_verify": false, "method": "POST", "header": {"x-foo":["bar", "baz"]}, "interval": "10s", "timeout": "1s"}]}' consul agent -bind=0.0.0.0 --retry-join=54.193.13.172